!function(){"use strict";function e(e,r){if(r&&!Array.isArray(e))throw new Error("Invalid argument type: Expected an Array to serialize multiple values.");const t=4294967296;let n,i,o=new Uint8Array(128),f=0;if(r)for(let r=0;r<e.length;r++)a(e[r]);else a(e);return o.subarray(0,f);function a(e){switch(typeof e){case"undefined":l(e);break;case"boolean":!function(e){s(e?195:194)}(e);break;case"number":!function(e){if(isFinite(e)&&Math.floor(e)===e)if(e>=0&&e<=127)s(e);else if(e<0&&e>=-32)s(e);else if(e>0&&e<=255)c([204,e]);else if(e>=-128&&e<=127)c([208,e]);else if(e>0&&e<=65535)c([205,e>>>8,e]);else if(e>=-32768&&e<=32767)c([209,e>>>8,e]);else if(e>0&&e<=4294967295)c([206,e>>>24,e>>>16,e>>>8,e]);else if(e>=-2147483648&&e<=2147483647)c([210,e>>>24,e>>>16,e>>>8,e]);else if(e>0&&e<=0x10000000000000000){let r=e/t,n=e%t;c([211,r>>>24,r>>>16,r>>>8,r,n>>>24,n>>>16,n>>>8,n])}else e>=-0x8000000000000000&&e<=0x8000000000000000?(s(211),d(e)):c(e<0?[211,128,0,0,0,0,0,0,0]:[207,255,255,255,255,255,255,255,255]);else i||(n=new ArrayBuffer(8),i=new DataView(n)),i.setFloat64(0,e),s(203),c(new Uint8Array(n))}(e);break;case"string":!function(e){let r=function(e){let r=!0,t=e.length;for(let n=0;n<t;n++)if(e.charCodeAt(n)>127){r=!1;break}let n=0,i=new Uint8Array(e.length*(r?1:4));for(let r=0;r!==t;r++){let o=e.charCodeAt(r);if(o<128)i[n++]=o;else{if(o<2048)i[n++]=o>>6|192;else{if(o>55295&&o<56320){if(++r>=t)throw new Error("UTF-8 encode: incomplete surrogate pair");let f=e.charCodeAt(r);if(f<56320||f>57343)throw new Error("UTF-8 encode: second surrogate character 0x"+f.toString(16)+" at index "+r+" out of range");o=65536+((1023&o)<<10)+(1023&f),i[n++]=o>>18|240,i[n++]=o>>12&63|128}else i[n++]=o>>12|224;i[n++]=o>>6&63|128}i[n++]=63&o|128}}return r?i:i.subarray(0,n)}(e),t=r.length;t<=31?s(160+t):c(t<=255?[217,t]:t<=65535?[218,t>>>8,t]:[219,t>>>24,t>>>16,t>>>8,t]);c(r)}(e);break;case"object":null===e?l(e):e instanceof Date?function(e){let r=e.getTime()/1e3;if(0===e.getMilliseconds()&&r>=0&&r<4294967296)c([214,255,r>>>24,r>>>16,r>>>8,r]);else if(r>=0&&r<17179869184){let n=1e6*e.getMilliseconds();c([215,255,n>>>22,n>>>14,n>>>6,n<<2>>>0|r/t,r>>>24,r>>>16,r>>>8,r])}else{let t=1e6*e.getMilliseconds();c([199,12,255,t>>>24,t>>>16,t>>>8,t]),d(r)}}(e):Array.isArray(e)?u(e):e instanceof Uint8Array||e instanceof Uint8ClampedArray?function(e){let r=e.length;c(r<=15?[196,r]:r<=65535?[197,r>>>8,r]:[198,r>>>24,r>>>16,r>>>8,r]);c(e)}(e):e instanceof Int8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?u(e):function(e){let r=0;for(let t in e)void 0!==e[t]&&r++;r<=15?s(128+r):c(r<=65535?[222,r>>>8,r]:[223,r>>>24,r>>>16,r>>>8,r]);for(let r in e){let t=e[r];void 0!==t&&(a(r),a(t))}}(e);break;default:throw new Error("Invalid argument type: The type '"+typeof e+"' cannot be serialized.")}}function l(e){s(192)}function u(e){let r=e.length;r<=15?s(144+r):c(r<=65535?[220,r>>>8,r]:[221,r>>>24,r>>>16,r>>>8,r]);for(let t=0;t<r;t++)a(e[t])}function s(e){if(o.length<f+1){let e=2*o.length;for(;e<f+1;)e*=2;let r=new Uint8Array(e);r.set(o),o=r}o[f]=e,f++}function c(e){if(o.length<f+e.length){let r=2*o.length;for(;r<f+e.length;)r*=2;let t=new Uint8Array(r);t.set(o),o=t}o.set(e,f),f+=e.length}function d(e){let r,n;e>=0?(r=e/t,n=e%t):(e++,r=~(r=Math.abs(e)/t),n=~(n=Math.abs(e)%t)),c([r>>>24,r>>>16,r>>>8,r,n>>>24,n>>>16,n>>>8,n])}}function r(e,r){const t=4294967296;let n,i=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),"object"!=typeof e||void 0===e.length)throw new Error("Invalid argument type: Expected a byte array (Array or Uint8Array) to deserialize.");if(!e.length)throw new Error("Invalid argument: The byte array to deserialize is empty.");if(e instanceof Uint8Array||(e=new Uint8Array(e)),r)for(n=[];i<e.length;)n.push(o());else n=o();return n;function o(){const r=e[i++];if(r>=0&&r<=127)return r;if(r>=128&&r<=143)return s(r-128);if(r>=144&&r<=159)return c(r-144);if(r>=160&&r<=191)return d(r-160);if(192===r)return null;if(193===r)throw new Error("Invalid byte code 0xc1 found.");if(194===r)return!1;if(195===r)return!0;if(196===r)return u(-1,1);if(197===r)return u(-1,2);if(198===r)return u(-1,4);if(199===r)return h(-1,1);if(200===r)return h(-1,2);if(201===r)return h(-1,4);if(202===r)return l(4);if(203===r)return l(8);if(204===r)return a(1);if(205===r)return a(2);if(206===r)return a(4);if(207===r)return a(8);if(208===r)return f(1);if(209===r)return f(2);if(210===r)return f(4);if(211===r)return f(8);if(212===r)return h(1);if(213===r)return h(2);if(214===r)return h(4);if(215===r)return h(8);if(216===r)return h(16);if(217===r)return d(-1,1);if(218===r)return d(-1,2);if(219===r)return d(-1,4);if(220===r)return c(-1,2);if(221===r)return c(-1,4);if(222===r)return s(-1,2);if(223===r)return s(-1,4);if(r>=224&&r<=255)return r-256;throw console.debug("msgpack array:",e),new Error("Invalid byte value '"+r+"' at index "+(i-1)+" in the MessagePack binary data (length "+e.length+"): Expecting a range of 0 to 255. This is not a byte array.")}function f(r){let t=0,n=!0;for(;r-- >0;)if(n){let r=e[i++];t+=127&r,128&r&&(t-=128),n=!1}else t*=256,t+=e[i++];return t}function a(r){let t=0;for(;r-- >0;)t*=256,t+=e[i++];return t}function l(r){let t=new DataView(e.buffer,i+e.byteOffset,r);return i+=r,4===r?t.getFloat32(0,!1):8===r?t.getFloat64(0,!1):void 0}function u(r,t){r<0&&(r=a(t));let n=e.subarray(i,i+r);return i+=r,n}function s(e,r){e<0&&(e=a(r));let t={};for(;e-- >0;){t[o()]=o()}return t}function c(e,r){e<0&&(e=a(r));let t=[];for(;e-- >0;)t.push(o());return t}function d(r,t){r<0&&(r=a(t));let n=i;return i+=r,function(e,r,t){let n=r,i="";t+=r;for(;n<t;){let r=e[n++];if(r>127)if(r>191&&r<224){if(n>=t)throw new Error("UTF-8 decode: incomplete 2-byte sequence");r=(31&r)<<6|63&e[n++]}else if(r>223&&r<240){if(n+1>=t)throw new Error("UTF-8 decode: incomplete 3-byte sequence");r=(15&r)<<12|(63&e[n++])<<6|63&e[n++]}else{if(!(r>239&&r<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+r.toString(16)+" at index "+(n-1));if(n+2>=t)throw new Error("UTF-8 decode: incomplete 4-byte sequence");r=(7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]}if(r<=65535)i+=String.fromCharCode(r);else{if(!(r<=1114111))throw new Error("UTF-8 decode: code point 0x"+r.toString(16)+" exceeds UTF-16 reach");r-=65536,i+=String.fromCharCode(r>>10|55296),i+=String.fromCharCode(1023&r|56320)}}return i}(e,n,r)}function h(e,r){e<0&&(e=a(r));let n=a(1),o=u(e);switch(n){case 255:return function(e){if(4===e.length){let r=(e[0]<<24>>>0)+(e[1]<<16>>>0)+(e[2]<<8>>>0)+e[3];return new Date(1e3*r)}if(8===e.length){let r=(e[0]<<22>>>0)+(e[1]<<14>>>0)+(e[2]<<6>>>0)+(e[3]>>>2),n=(3&e[3])*t+(e[4]<<24>>>0)+(e[5]<<16>>>0)+(e[6]<<8>>>0)+e[7];return new Date(1e3*n+r/1e6)}if(12===e.length){let r=(e[0]<<24>>>0)+(e[1]<<16>>>0)+(e[2]<<8>>>0)+e[3];i-=8;let t=f(8);return new Date(1e3*t+r/1e6)}throw new Error("Invalid data length for a date value.")}(o)}return{type:n,data:o}}}let t={serialize:e,deserialize:r,encode:e,decode:r};"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=t:window[window.msgpackJsName||"msgpack"]=t}();
//# sourceMappingURL=msgpack.min.js.map